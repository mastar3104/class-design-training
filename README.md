# クラス設計トレーニング
以下の仕様およびmainブランチの実装を参照して、シナリオ1~3の問題を改修できるよう実装してください。

## 概要
社員管理システムの一部です。
社員はクラブに自由に所属できます。

## 仕様
 - 社員仕様
   - 社員は一つのクラブに所属できます。
   - ただし、クラブ所属の申請を出した後に、上長による承認を必要としています。
   - クラブの変更も自由に行えますが、その際も新たに承認が必要です。
     - また、元々の所属が未承認の状態ではクラブの変更は行えません。
   - クラブを変更ではなく、ただ脱退することも可能です。（未所属となる）
     - 未承認の状態でも脱退は可能です。（正確にはその場合は脱退ではなく申請取り下げとなる）
   - クラブに未所属の社員は、システム上 `clb-0000` のクラブIDに属しているものとしています。
 - クラブ仕様
   - クラブは社員の所属数を保持しています。
     - 所属数は承認/未承認を問いません。
     - 社員が新たにクラブに所属した際は加算、社員がクラブを変更/脱退した際は減算する必要があります。
   - クラブ未所属も一つのクラブとしてDB上にレコードを持っており、他のクラブ同様所属数の加減算も行います。

## シナリオ
1. 以下のバグが発覚しました。
 - クラブ認証済みの社員に対して、クラブ脱退のリクエストを送った際、クラブの認証状態が未認証になっていなかった
   - 該当の状態を確認するテストを `EmployeeClubDeleteTest` に追加した 

該当のテストが通るよう実装を修正してください。

2. 上記のバグを受け、TechLeadチームにコードレビューを依頼した結果、以下の回答が来ました。
 - Employeeの状態を管理するメソッド(create, changeなど)が散らばっており、状態管理の仕様をコードに落とし込めていないように見える
 - ルールを破ったEmployeeインスタンスを生成できるが問題ではないか 

上記の回答を受け、リファクタリングを実施してください。

3. さらに以下のバグが発覚しました。
 - ClubのnumberOfEmployeeが実態とずれている 

問い合わせベースで発覚し、上記の詳細な条件等は現状不明です。  
原因を確定し、コードを修正してください。